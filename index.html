<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Weird Salary Converter</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 10px;
      background-color: #f0f4f8;
      text-align: center;
      min-height: 100vh;
    }
    h1 {
      color: #1a2a44;
      font-size: 1.8em;
    }
    p.salary-label {
      font-size: 1.4em;
      text-align: center;
      margin: 10px 0;
      white-space: nowrap;
    }
    .input-container {
      position: relative;
      display: inline-block;
      width: 100%;
      max-width: 320px;
      margin: 8px auto;
    }
    input {
      font-size: 1.4em;
      padding: 12px 12px 12px 30px;
      width: 100%;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 4px;
      transition: border-color 0.3s ease;
    }
    input:focus {
      border-color: #2e7d32;
      outline: none;
    }
    .dollar-sign {
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.4em;
      color: #333;
      pointer-events: none;
    }
    select {
      font-size: 1.4em;
      padding: 16px;
      margin: 8px auto;
      width: 100%;
      max-width: 90%;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 4px;
      transition: border-color 0.3s ease;
      text-align: center;
      display: block;
    }
    select:focus {
      border-color: #2e7d32;
      outline: none;
    }
    select:hover {
      border-color: #1a2a44;
    }
    #result {
      font-size: 1.6em;
      margin-top: 20px;
      text-align: left;
      max-width: 90%;
      margin: 20px auto;
      padding: 15px;
      background-color: white;
      border-left: 5px solid #2e7d32;
      word-wrap: break-word;
      overflow-wrap: break-word;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    #result.show {
      opacity: 1;
    }
    #result.error {
      color: #d32f2f;
      border-left: 5px solid #d32f2f;
      background-color: #ffebee;
    }
    #result .number {
      color: #388e3c;
      margin-left: 0;
    }
    #funFactContainer {
      max-width: 90%;
      margin: 15px auto;
      padding: 12px;
      background-color: white;
      border-left: 5px solid #ffeb3b;
      text-align: left;
      word-wrap: break-word;
      overflow-wrap: break-word;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    #funFactLabel {
      display: inline;
      background-color: #ffffff;
      color: #2e7d32;
      padding: 2px 6px;
      border-radius: 3px;
      font-size: 1.2em;
      font-weight: bold;
      text-transform: uppercase;
      box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
      background-image: linear-gradient(to right, #f9f9f9, #ffffff);
      margin-right: 5px;
    }
    #funFact {
      font-size: 1.4em;
      color: #333;
      line-height: 1.4;
      display: inline;
    }
    @media (min-width: 768px) {
      h1 { font-size: 2.5em; }
      p.salary-label { font-size: 1.6em; }
      .input-container, select { max-width: 400px; }
      input { font-size: 1.6em; padding: 15px 15px 15px 35px; }
      .dollar-sign { font-size: 1.6em; left: 12px; }
      select { font-size: 1.6em; padding: 15px; }
      #result { font-size: 2em; max-width: 600px; }
      #funFactLabel { font-size: 1.4em; }
      #funFact { font-size: 1.6em; }
      #funFactContainer { max-width: 600px; }
    }
    @media (min-width: 1024px) {
      body { margin: 20px; }
      h1 { font-size: 3em; }
      p.salary-label { font-size: 1.8em; }
      .input-container, select { max-width: 500px; }
      input { padding-left: 40px; }
      .dollar-sign { left: 15px; }
      select { font-size: 1.8em; padding: 15px; }
      #result, #funFactContainer { max-width: 800px; }
    }
  </style>
</head>
<body>
  <h1>Weird Salary Converter</h1>
  <p class="salary-label">Enter your annual salary (in dollars):</p>
  <div class="input-container">
    <span class="dollar-sign">$</span>
    <input type="text" id="salaryInput" placeholder="e.g. 50,000" aria-label="Annual salary in dollars">
  </div>
  <select id="conversionType" onchange="convert()" aria-label="Select conversion type">
    <option value="">Choose a Quirky Conversion</option>
    <option value="goldfish">Goldfish üêü</option>
    <option value="postit">Post-it Notes</option> <!-- Simplified for testing -->
    <option value="swim">Minutes of Swim Time in Iceland üèä‚Äç‚ôÇÔ∏è</option>
  </select>
  <div id="result" aria-live="polite"></div>
  <div id="funFactContainer">
    <span id="funFactLabel">Did you know?</span>
    <span id="funFact" aria-live="polite"></span>
  </div>

  <script>
    const salaryInput = document.getElementById("salaryInput");
    const conversionTypeSelect = document.getElementById("conversionType");
    const resultDiv = document.getElementById("result");
    const funFactDiv = document.getElementById("funFact");
    const funFactContainer = document.getElementById("funFactContainer");

    const PRICES = {
      goldfish: 0.50,
      postit: 0.10,
      swim: 0.1667
    };

    const FUN_FACTS = {
      goldfish: "Goldfish can live up to 10 years with proper care.",
      postit: "Post-it Notes were invented by accident in 1968 by Spencer Silver.",
      swim: "Iceland‚Äôs hot springs are heated by geothermal energy."
    };

    const FUN_FACT_COLORS = [
      "#ffeb3b", // Yellow
      "#f44336", // Red
      "#64b5f6", // Medium-light blue
      "#00e676"  // Bright green
    ];
    let colorIndex = 0;

    document.addEventListener("DOMContentLoaded", () => {
      conversionTypeSelect.addEventListener("change", convert);
      console.log("Event listener attached");
    });

    salaryInput.addEventListener("input", function() {
      let value = this.value.replace(/[^0-9]/g, "");
      if (value) {
        value = parseInt(value).toLocaleString("en-US");
        this.value = value;
      }
    });

    function convert() {
      console.log("Convert function triggered");
      const salary = parseFloat(salaryInput.value.replace(/,/g, ""));
      console.log("Salary parsed:", salary);
      if (isNaN(salary) || salary < 1 || salary > 1000000000) {
        showResult("Please enter a valid salary between $1 and $1 billion.");
        funFactDiv.textContent = "";
        return;
      }

      const conversionType = conversionTypeSelect.value;
      console.log("Conversion type:", conversionType);
      if (!conversionType) {
        resultDiv.textContent = "";
        funFactDiv.textContent = "";
        return;
      }

      const result = salary / PRICES[conversionType];
      console.log("Result calculated:", result);
      const unit = conversionTypeSelect.options[conversionTypeSelect.selectedIndex].text;
      let finalUnit = unit;
      let resultText;

      if (conversionType === "ramen" || conversionType === "wax") {
        finalUnit = conversionType === "ramen" ? "instant noodles" : "Turtle Wax";
        resultText = `You can buy approx. <span class="number">${result.toLocaleString(undefined, { maximumFractionDigits: 2 })}</span> years worth of ${finalUnit}.`;
      } else {
        if (conversionType === "tiger") {
          finalUnit = result <= 1 ? "pet tiger" : "pet tigers";
        } else if (conversionType === "billboard") {
          finalUnit = result <= 1 ? "billboard in Times Square for one day" : "billboards in Times Square for one day";
        } else if (result < 2 && result > 0) {
          if (unit === "One-Year Supplies of Instant Noodles") finalUnit = "One-Year Supply of Instant Noodles";
        }

        const fractionDigits = result < 1 ? 4 : 2;
        const properNouns = [
          "Super Bowl", "Ferrari 296 GTB", "Harley Davidson", "Stradivarius", "Rolex Submariner",
          "Xbox Series X", "Taylor Swift", "SpaceX", "Times Square", "Machu Picchu", "Wimbledon",
          "Turtle Wax", "Thomas Edison", "Van Camp‚Äôs Pork and Beans"
        ];
        finalUnit = properNouns.includes(unit) ? unit : finalUnit.toLowerCase();

        resultText = `You can buy approx. <span class="number">${result.toLocaleString(undefined, { maximumFractionDigits: fractionDigits })}</span> ${finalUnit}.`;
      }

      const funFact = FUN_FACTS[conversionType] || "This item has a fascinating history";
      
      funFactContainer.style.borderLeftColor = FUN_FACT_COLORS[colorIndex];
      colorIndex = (colorIndex + 1) % FUN_FACT_COLORS.length;

      showResult(resultText);
      funFactDiv.textContent = `${funFact}`;
    }

    function showResult(message) {
      console.log("Setting result:", message); // Debug: Check if result is set
      resultDiv.innerHTML = message;
      resultDiv.classList.remove("show");
      setTimeout(() => resultDiv.classList.add("show"), 10);
    }
  </script>
</body>
</html>
